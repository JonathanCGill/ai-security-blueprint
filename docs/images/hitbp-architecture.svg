<svg xmlns="http://www.w3.org/2000/svg" width="880" height="520" viewBox="0 0 880 520">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#475569"/>
    </marker>
    <marker id="arrow-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
    </marker>
    <marker id="arrow-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#ef4444"/>
    </marker>
    <marker id="arrow-light" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#94a3b8"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="880" height="520" fill="#f8fafc"/>

  <!-- Title -->
  <text x="440" y="32" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#1e293b" text-anchor="middle">Humans in the Business Process - Architecture</text>
  <text x="440" y="52" font-family="Arial, sans-serif" font-size="12" fill="#64748b" text-anchor="middle">AI decides fast. The business process catches what automated layers miss.</text>

  <!-- === AI CONTROL ZONE === -->
  <rect x="40" y="70" width="800" height="150" rx="10" fill="#eff6ff" stroke="#bfdbfe" stroke-width="1.5"/>
  <text x="60" y="92" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#3b82f6">AI CONTROL ZONE</text>

  <!-- AI System -->
  <rect x="70" y="110" width="110" height="80" rx="8" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
  <text x="125" y="140" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1e40af" text-anchor="middle">AI System</text>
  <text x="125" y="158" font-family="Arial, sans-serif" font-size="10" fill="#3b82f6" text-anchor="middle">Generates</text>
  <text x="125" y="172" font-family="Arial, sans-serif" font-size="10" fill="#3b82f6" text-anchor="middle">output</text>

  <!-- Arrow to Guardrails -->
  <line x1="180" y1="150" x2="215" y2="150" stroke="#475569" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Guardrails -->
  <rect x="225" y="110" width="120" height="80" rx="8" fill="#dcfce7" stroke="#22c55e" stroke-width="2"/>
  <text x="285" y="140" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#166534" text-anchor="middle">Guardrails</text>
  <text x="285" y="158" font-family="Arial, sans-serif" font-size="10" fill="#166534" text-anchor="middle">Block</text>
  <text x="285" y="172" font-family="Arial, sans-serif" font-size="10" fill="#166534" text-anchor="middle">known-bad</text>

  <!-- Arrow to Judge -->
  <line x1="345" y1="150" x2="380" y2="150" stroke="#475569" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Judge -->
  <rect x="390" y="110" width="120" height="80" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <text x="450" y="140" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#b45309" text-anchor="middle">Judge</text>
  <text x="450" y="158" font-family="Arial, sans-serif" font-size="10" fill="#92400e" text-anchor="middle">Detect</text>
  <text x="450" y="172" font-family="Arial, sans-serif" font-size="10" fill="#92400e" text-anchor="middle">unknown-bad</text>

  <!-- Arrow to HITL -->
  <line x1="510" y1="150" x2="545" y2="150" stroke="#475569" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- HITL -->
  <rect x="555" y="110" width="120" height="80" rx="8" fill="#f0fdf4" stroke="#22c55e" stroke-width="2"/>
  <text x="615" y="140" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#166534" text-anchor="middle">HITL</text>
  <text x="615" y="158" font-family="Arial, sans-serif" font-size="10" fill="#166534" text-anchor="middle">Decide</text>
  <text x="615" y="172" font-family="Arial, sans-serif" font-size="10" fill="#166534" text-anchor="middle">ambiguous</text>

  <!-- Arrow to AI Output -->
  <line x1="675" y1="150" x2="710" y2="150" stroke="#475569" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- AI Output -->
  <rect x="720" y="120" width="100" height="60" rx="8" fill="#e0e7ff" stroke="#6366f1" stroke-width="2"/>
  <text x="770" y="155" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#4338ca" text-anchor="middle">AI Output</text>

  <!-- === TRANSITION ARROW === -->
  <line x1="770" y1="185" x2="770" y2="260" stroke="#475569" stroke-width="2.5" marker-end="url(#arrow)"/>
  <text x="770" y="238" font-family="Arial, sans-serif" font-size="10" fill="#64748b" text-anchor="middle" font-weight="bold">Enters business</text>
  <text x="770" y="252" font-family="Arial, sans-serif" font-size="10" fill="#64748b" text-anchor="middle" font-weight="bold">process</text>

  <!-- === BUSINESS PROCESS ZONE === -->
  <rect x="40" y="270" width="800" height="150" rx="10" fill="#faf5ff" stroke="#e9d5ff" stroke-width="1.5"/>
  <text x="60" y="292" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#7c3aed">BUSINESS PROCESS ZONE</text>

  <!-- Process Step 1 -->
  <rect x="70" y="310" width="140" height="80" rx="8" fill="#f1f5f9" stroke="#94a3b8" stroke-width="1.5"/>
  <text x="140" y="340" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#475569" text-anchor="middle">Process Step</text>
  <text x="140" y="358" font-family="Arial, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">Automated</text>
  <text x="140" y="372" font-family="Arial, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">workflow</text>

  <!-- Arrow -->
  <line x1="210" y1="350" x2="260" y2="350" stroke="#475569" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Human Decision Point (HITBP) -->
  <rect x="270" y="300" width="180" height="100" rx="8" fill="#fce7f3" stroke="#ec4899" stroke-width="2.5"/>
  <text x="360" y="328" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#9d174d" text-anchor="middle">Human Decision</text>
  <text x="360" y="346" font-family="Arial, sans-serif" font-size="11" fill="#be185d" text-anchor="middle">Point (HITBP)</text>
  <line x1="285" y1="355" x2="435" y2="355" stroke="#f9a8d4" stroke-width="1"/>
  <text x="360" y="374" font-family="Arial, sans-serif" font-size="10" fill="#9d174d" text-anchor="middle">Business decision with</text>
  <text x="360" y="388" font-family="Arial, sans-serif" font-size="10" fill="#9d174d" text-anchor="middle">full domain context</text>

  <!-- Two arrows from HITBP -->
  <!-- Commit path -->
  <line x1="450" y1="330" x2="530" y2="330" stroke="#22c55e" stroke-width="2" marker-end="url(#arrow-green)"/>
  <text x="490" y="322" font-family="Arial, sans-serif" font-size="9" fill="#16a34a" text-anchor="middle">OK</text>

  <!-- Commit to action -->
  <rect x="540" y="305" width="140" height="60" rx="8" fill="#dcfce7" stroke="#22c55e" stroke-width="2"/>
  <text x="610" y="333" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#166534" text-anchor="middle">Commit to</text>
  <text x="610" y="350" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#166534" text-anchor="middle">Action</text>

  <!-- Flag path -->
  <line x1="450" y1="370" x2="530" y2="370" stroke="#ef4444" stroke-width="2" marker-end="url(#arrow-red)"/>
  <text x="490" y="386" font-family="Arial, sans-serif" font-size="9" fill="#dc2626" text-anchor="middle">Problem</text>

  <!-- Flag problem -->
  <rect x="540" y="375" width="140" height="40" rx="8" fill="#fee2e2" stroke="#ef4444" stroke-width="2"/>
  <text x="610" y="400" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#b91c1c" text-anchor="middle">Flag Problem</text>

  <!-- === FEEDBACK LOOP === -->
  <!-- Feedback arrow from Flag back up to AI controls -->
  <path d="M 610 415 L 610 460 L 450 460 L 450 480" stroke="#94a3b8" stroke-width="1.5" fill="none" stroke-dasharray="5,3"/>

  <!-- Feedback zone -->
  <rect x="200" y="470" width="520" height="40" rx="8" fill="#f1f5f9" stroke="#94a3b8" stroke-width="1.5"/>
  <text x="460" y="495" font-family="Arial, sans-serif" font-size="11" fill="#475569" text-anchor="middle" font-weight="bold">Feedback Loop: Corrections route to Guardrails, Judge calibration, Model retraining</text>

  <!-- Feedback arrow back up -->
  <path d="M 285 470 L 285 440 L 50 440 L 50 150 L 65 150" stroke="#94a3b8" stroke-width="1.5" fill="none" stroke-dasharray="5,3" marker-end="url(#arrow-light)"/>

  <!-- Key timing labels -->
  <rect x="700" y="85" width="120" height="25" rx="4" fill="#dbeafe" stroke="#93c5fd" stroke-width="1"/>
  <text x="760" y="102" font-family="Arial, sans-serif" font-size="9" fill="#1e40af" text-anchor="middle" font-weight="bold">ms to minutes</text>

  <rect x="700" y="285" width="120" height="25" rx="4" fill="#f5d0fe" stroke="#d8b4fe" stroke-width="1"/>
  <text x="760" y="302" font-family="Arial, sans-serif" font-size="9" fill="#7c3aed" text-anchor="middle" font-weight="bold">hours to days</text>
</svg>
