<svg xmlns="http://www.w3.org/2000/svg" width="750" height="180" viewBox="0 0 750 180">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#475569"/>
    </marker>
    <marker id="arrow-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#ef4444"/>
    </marker>
  </defs>

  <rect width="750" height="180" fill="#f8fafc"/>

  <text x="375" y="22" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#1e293b" text-anchor="middle">LangGraph Guardrail Flow</text>

  <!-- User Input -->
  <rect x="20" y="50" width="100" height="40" rx="4" fill="#e0e7ff" stroke="#6366f1" stroke-width="1.5"/>
  <text x="70" y="75" font-family="Arial, sans-serif" font-size="11" fill="#4338ca" text-anchor="middle">User Input</text>

  <line x1="120" y1="70" x2="158" y2="70" stroke="#475569" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Guardrail Node -->
  <rect x="160" y="50" width="130" height="40" rx="4" fill="#dcfce7" stroke="#22c55e" stroke-width="1.5"/>
  <text x="225" y="75" font-family="Arial, sans-serif" font-size="11" fill="#166534" text-anchor="middle">Guardrail Node</text>

  <line x1="290" y1="70" x2="328" y2="70" stroke="#475569" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Agent Node -->
  <rect x="330" y="50" width="110" height="40" rx="4" fill="#fef3c7" stroke="#f59e0b" stroke-width="1.5"/>
  <text x="385" y="75" font-family="Arial, sans-serif" font-size="11" fill="#92400e" text-anchor="middle">Agent Node</text>

  <line x1="440" y1="70" x2="478" y2="70" stroke="#475569" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Judge Node -->
  <rect x="480" y="50" width="110" height="40" rx="4" fill="#fef3c7" stroke="#f59e0b" stroke-width="1.5"/>
  <text x="535" y="75" font-family="Arial, sans-serif" font-size="11" fill="#92400e" text-anchor="middle">Judge Node</text>

  <line x1="590" y1="70" x2="628" y2="70" stroke="#475569" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Output -->
  <rect x="630" y="50" width="90" height="40" rx="20" fill="#e0e7ff" stroke="#6366f1" stroke-width="1.5"/>
  <text x="675" y="75" font-family="Arial, sans-serif" font-size="11" fill="#4338ca" text-anchor="middle">Output</text>

  <!-- Flagged path down from Guardrail -->
  <line x1="225" y1="90" x2="225" y2="128" stroke="#ef4444" stroke-width="1.5" marker-end="url(#arrow-red)"/>

  <!-- Human Review -->
  <rect x="160" y="130" width="130" height="40" rx="4" fill="#fee2e2" stroke="#ef4444" stroke-width="1.5"/>
  <text x="225" y="155" font-family="Arial, sans-serif" font-size="11" fill="#b91c1c" text-anchor="middle">Human Review</text>

  <!-- Label on flagged arrow -->
  <text x="240" y="115" font-family="Arial, sans-serif" font-size="9" fill="#ef4444" font-style="italic">flagged</text>
</svg>
